<template>
  <div>
    <div class="app-screen bg-secondary h-screen relative">
      <img src="/images/logo/logo_text.png" alt="" class="logo-text" />

      <!-- 
        SECTION 1
      -->
      <section>
        <img src="/images/logo/logo_text.png" alt="" class="logo-text" />
        <img src="/images/main/start.png" alt="" class="start-bg" />
        <img src="/images/main/road.png" alt="" class="road-bg" />
        <img src="/images/bg/bg_decorate_01.png" alt="" class="cloud-1" />
        <img src="/images/bg/bg_decorate_05.png" alt="" class="cloud-2" />

        <img src="/images/character/character_f2e.gif" alt="" class="ch_f2e" />
        <img src="/images/character/character_ui.gif" alt="" class="ch_ui" />
        <img
          src="/images/character/character_team.gif"
          alt=""
          class="ch_team"
        />

        <div class="btn-join-area">
          <div class="text-primary text-title-h5 mb-2">JOIN</div>
          <img src="/images/btn/btn_joinHand.png" alt="" class="btn_joinHand" />
          <img src="/images/btn/btn_join.png" alt="" class="btn_join" />
        </div>

        <img src="/images/main/map.svg" alt="" class="map" />

        <div class="traffic-light-area inline-block">
          <div class="text-center text-highlight text-title-h4">READY?</div>
          <div class="light-wrap">
            <img
              src="/images/main/ready_frame.png"
              alt=""
              class="ready_frame"
            />
            <img src="/images/main/ready_1.png" alt="" class="green-light" />
            <img src="/images/main/ready_2.png" alt="" class="yellow-light" />
            <img src="/images/main/ready_3.png" alt="" class="red-light" />
          </div>
        </div>

        <div
          class="title-text bg-highlight text-white text-title-h4 inline-block px-10 py-2 rounded-full"
        >
          互動式網頁設計
        </div>

        <div class="f2e-info-area">
          <div class="f2e-area">
            <div class="text-primary text-title-h5 mb-2">前端工程師</div>
            <div
              class="bg-primary text-white text-title-h4 inline-block px-10 py-1 rounded-full"
            >
              920
            </div>
          </div>

          <div class="f2e-area">
            <div class="text-primary text-title-h5 mb-2">UI 設計師</div>
            <div
              class="bg-primary text-white text-title-h4 inline-block px-10 py-1 rounded-full"
            >
              920
            </div>
          </div>

          <div class="f2e-area">
            <div class="text-primary text-title-h5 mb-2">團體組</div>
            <div
              class="bg-primary text-white text-title-h4 inline-block px-10 py-1 rounded-full"
            >
              41
            </div>
          </div>
        </div>
      </section>

      <!-- 
        SECTION 2
      -->

      <section>
        <div class="section2__title section-title">
          <img
            src="/images/text/talking_2.png"
            alt=""
            class=""
            width="736"
            height="151"
          />
        </div>

        <img src="/images/bg/bg_decorate_09.png" alt="" class="cloud-3" />
        <img src="/images/bg/bg_decorate_09.png" alt="" class="cloud-4" />

        <img src="/images/main/question_1.png" alt="" class="question_1" />
        <img src="/images/main/question_2.png" alt="" class="question_2" />
        <img src="/images/main/question_3.png" alt="" class="question_3" />
      </section>

      <!-- 
        SECTION 3
      -->

      <section>
        <div class="section3__title section-title">
          <img
            src="/images/text/talking_3.png"
            alt=""
            class=""
            width="736"
            height="151"
          />
        </div>

        <div
          class="section3__btn_join_1 flex flex-col items-center justify-center"
        >
          <img src="/images/btn/btn_join.png" alt="" class="mb-4" />
          <div class="text-primary text-title-h4">前端工程師</div>
        </div>

        <div
          class="section3__btn_join_2 flex flex-col items-center justify-center"
        >
          <img src="/images/btn/btn_join.png" alt="" class="mb-4" />
          <div class="text-primary text-title-h4">ＵＩ設計師</div>
        </div>

        <div
          class="section3__btn_join_3 flex flex-col items-center justify-center"
        >
          <img src="/images/btn/btn_join.png" alt="" class="mb-4" />
          <div class="text-primary text-title-h4">團體組(UI+前端)</div>
        </div>
      </section>

      <!-- 
        SECTION 4
      -->

      <section>
        <div class="section4__title section-title">
          <img src="/images/text/talking_4.png" alt="" class="" />
        </div>

        <div class="section4__stage1 flex items-start">
          <img src="/images/main/week_1.png" alt="" class="mr-10" />
          <div class="flex flex-col">
            <div class="text-highlight text-title-h2">WEEK 1</div>
            <div class="text-primary text-title-h3">The F2E 活動網站設計</div>
            <div class="flex mb-6">
              <div
                class="px-6 py-1 rounded-full border border-secondary-dark text-secondary-dark mr-4"
              >
                Parallax Scrolling
              </div>
              <div
                class="px-6 py-1 rounded-full border border-secondary-dark text-secondary-dark"
              >
                #版塊設計
              </div>
            </div>
            <div>
              <div
                class="inline-block px-6 py-1 rounded-full border border-secondary-dark bg-secondary-dark text-white"
              >
                查看關卡細節
              </div>
            </div>
          </div>
        </div>

        <div class="section4__stage2 flex flex-row-reverse items-start">
          <img src="/images/main/week_2.png" alt="" class="ml-10" />
          <div class="flex flex-col">
            <div class="text-highlight text-title-h2">WEEK 2</div>
            <div class="text-primary text-title-h3">今晚，我想來點點簽</div>
            <div class="flex mb-6">
              <div
                class="px-6 py-1 rounded-full border border-secondary-dark text-secondary-dark mr-4"
              >
                Canvas
              </div>
              <div
                class="px-6 py-1 rounded-full border border-secondary-dark text-secondary-dark"
              >
                #凱鈿行動科技
              </div>
            </div>
            <div>
              <div
                class="inline-block px-6 py-1 rounded-full border border-secondary-dark bg-secondary-dark text-white"
              >
                查看關卡細節
              </div>
            </div>
          </div>
        </div>

        <div class="section4__stage3 flex items-start">
          <img src="/images/main/week_3.png" alt="" class="mr-10" />
          <div class="flex flex-col">
            <div class="text-highlight text-title-h2">WEEK 3</div>
            <div class="text-primary text-title-h3">Scrum 新手村</div>
            <div class="flex mb-6">
              <div
                class="px-6 py-1 rounded-full border border-secondary-dark text-secondary-dark mr-4"
              >
                JS draggable
              </div>
              <div
                class="px-6 py-1 rounded-full border border-secondary-dark text-secondary-dark"
              >
                #鈦坦科技
              </div>
            </div>
            <div>
              <div
                class="inline-block px-6 py-1 rounded-full border border-secondary-dark bg-secondary-dark text-white"
              >
                查看關卡細節
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 
        SECTION 5
      -->

      <section>
        <div class="section5__dateline-wrap">
          <div class="section5__dateline_block"></div>
          <img
            class="section5__dateline"
            src="/images/main/date_line.png"
            alt=""
          />
        </div>

        <img
          class="section5__date_weekLine1"
          src="/images/main/date_weekLine.png"
          alt=""
        />
        <div class="section5__date_weekLine1-content">
          <div
            class="section5__btn_join_1 flex flex-col items-center justify-center"
          >
            <img
              src="/images/btn/btn_join.png"
              alt=""
              class="mb-4"
              width="103"
            />
            <div class="text-highlight text-title-h2">SIGN UP</div>
            <div
              class="inline-block px-6 py-1 rounded-full text-title-h4 border border-primary bg-primary text-white mb-3"
            >
              10/13 - 11/6
            </div>
            <div class="text-secondary-dark text-center">
              截止前可修改報名組別
            </div>
          </div>
        </div>

        <img
          class="section5__date_weekLine2"
          src="/images/main/date_weekLine.png"
          alt=""
        />
        <div class="section5__date_weekLine2-content">
          <div
            class="section5__btn_join_1 flex flex-col items-center justify-center"
          >
            <img
              src="/images/main/date_start.png"
              alt=""
              class="mb-4"
              width="140"
            />
            <div class="text-highlight text-title-h2">START</div>
            <div
              class="inline-block px-6 py-1 rounded-full text-title-h4 border border-primary bg-primary text-white mb-3"
            >
              10/31 - 11/28
            </div>
            <div class="text-secondary-dark text-center">
              10/31(一) UI、團體組開賽<br />
              11/7(一) 前端組開賽
            </div>
          </div>
        </div>

        <div class="section5__weekLine">
          <img
            class="section5__date_weekLine3"
            src="/images/main/date_weekLine.png"
            alt=""
          />
        </div>
        <div class="section5__date_weekLine3-content">
          <div
            class="section5__btn_join_1 flex flex-col items-center justify-center"
          >
            <img
              src="/images/main/date_upload.png"
              alt=""
              class="mb-4"
              width="140"
            />
            <div class="text-highlight text-title-h2">UPLOAD</div>
            <div
              class="inline-block px-6 py-1 rounded-full text-title-h4 border border-primary bg-primary text-white mb-3"
            >
              10/31 - 11/28
            </div>
            <div class="text-secondary-dark text-center">
              依賽程登錄作品<br />
              <span class="text-highlight"> 額外競賽： 主題豐厚獎金等著你</span>
            </div>
          </div>
        </div>

        <img
          src="/images/bg/bg_decorate_03.png"
          alt=""
          class="section5__cloud-left"
        />
        <img
          src="/images/bg/bg_decorate_07.png"
          alt=""
          class="section5__cloud-right"
        />

        <div class="section5__text2 w-full text-title-h2 text-highlight">
          <div class="text-center">區區修煉已經無法滿足了嗎？</div>
        </div>
      </section>

      <!-- 
        SECTION 6
      -->

      <section>
        <div class="section6__title section-title">
          <img src="/images/text/talking_6.png" alt="" class="" />
        </div>

        <!-- 這邊想要下怎麼不要用 abs -->
        <div class="section6__award">
          <img
            src="/images/main/award_light.png"
            alt=""
            class="section6__award_light"
            width="736"
            height="151"
          />
          <img
            src="/images/main/award_trophy.png"
            alt=""
            class="section6__award_trophy"
            width="736"
            height="151"
          />
        </div>
        <div class="section6__content">
          <div class="mb-8">
            <div class="text-highlight text-title-h4">評審機制</div>
            <div class="text-primary">
              初選： 將由六角學院前端、UI 評審進行第一波篩選。<br />
              決選： 由六角學院與贊助廠商討論，進行最後篩選，並於 12/30(五)
              由評審進行直播公布名單！
            </div>
          </div>

          <div class="">
            <div class="text-highlight text-title-h4">獎項</div>
            <div class="text-primary">
              <ol>
                <li>1. 初選佳作 共六十位 數位獎狀</li>
                <li>
                  2. 個人企業獎 共六位 NTD
                  <span class="text-highlight text-highlight-desc">3,000</span>
                  /位
                </li>
                <li>
                  3. 團體企業獎 共三組 NTD
                  <span class="text-highlight text-highlight-desc">10,000</span>
                  /組
                </li>
                <li>4. 以上皆提供完賽數位獎狀</li>
              </ol>
            </div>
          </div>
        </div>
      </section>

      <!-- 
        SECTION 7
      -->

      <section>
        <img
          src="/images/text/talking_7.png"
          alt=""
          class="section7__title section-title"
        />
        <img
          src="/images/bg/bg_decorate_08.png"
          alt=""
          class="section7__tree-left"
        />
        <img
          src="/images/bg/bg_decorate_08.png"
          alt=""
          class="section7__tree-right"
        />

        <div class="section7__logo-wrap-1 text-center">
          <img src="/images/main/logo_blockstudio.png" alt="" class="mb-4" />

          <div
            class="inline-block px-6 py-1 rounded-full border border-secondary-dark text-secondary-dark text-highlight-desc mr-4"
          >
            #版塊設計
          </div>
        </div>

        <div class="section7__logo-wrap-2 text-center">
          <img src="/images/main/logo_titansoft.png" alt="" class="mb-4" />

          <div
            class="inline-block px-6 py-1 rounded-full border border-secondary-dark text-secondary-dark text-highlight-desc mr-4"
          >
            #鈦坦科技
          </div>
        </div>

        <div class="section7__logo-wrap-3 text-center">
          <img src="/images/main/logo_kdanmobile.png" alt="" class="mb-4" />

          <div
            class="inline-block px-6 py-1 rounded-full border border-secondary-dark text-secondary-dark text-highlight-desc mr-4"
          >
            #凱鈿科技
          </div>
        </div>

        <img
          src="/images/bg/bg_decorate_01.png"
          alt=""
          class="section7__cloud-left"
        />
        <img
          src="/images/bg/bg_decorate_05.png"
          alt=""
          class="section7__cloud-right"
        />

        <img src="/images/main/finish.png" alt="" class="section7__finish" />

        <img
          src="/images/main/finishLine_l.png"
          alt=""
          class="section7__finishLine_l"
        />
        <img
          src="/images/main/finishLine_r.png"
          alt=""
          class="section7__finishLine_r"
        />

        <img src="/images/logo/logo.png" alt="" class="section7__logo" />

        <div class="section7__join text-center">
          <img src="/images/btn/btn_joinHand.png" alt="" class="btn_joinHand" />
          <img src="/images/btn/btn_join.png" alt="" class="btn_join mb-5" />
          <div class="text-highlight text-title-h2">立即報名</div>
        </div>
      </section>

      <!-- top app-screen -->
    </div>
    <div class="scrollElement"></div>
    <!-- <div class="h-screen"></div>
    <div class="trigger-1  w-20 h-20 bg-red-700 relative z-20" ></div>
    <div class="h-screen"></div>
    <div class="trigger-2  w-20 h-20 bg-blue-700 relative z-20" ></div>
    <div class="h-screen"></div>
    <div class="h-screen"></div> -->
  </div>
</template>

<script setup lang="ts">
import gsap from "gsap";
import scrollTrigger from "gsap/ScrollTrigger";

import { onMounted } from "vue";
// import Section2 from "./components/Section2.vue";
// import ImageText from "./components/ImageText.vue";

onMounted(() => {
  gsap.registerPlugin(scrollTrigger);

  // const getStart = (num: number) => num * 100
  // const getSectionStart = (num: number) => `top ${getStart(num) * 100}%`
  // const getSectionEnd = (num: number) => `top ${getStart(num - 100)}%`
  const speed = 100;
  const showMarker = process.env.NODE_ENV !== "production";

  const tl = gsap.timeline();
  scrollTrigger.create({
    animation: tl,
    trigger: ".scrollElement",
    start: "0 top",
    end: "2000 100%",
    scrub: 3,
    markers: showMarker,
  });

  tl.to(".cloud-1", { y: 0 * speed, x: 2 * speed, scale: 0.8 }, 0);
  tl.to(".cloud-2", { y: 0 * speed, x: -2 * speed, scale: 0.8 }, 0);
  tl.to([".yellow-light", ".green-light"], { y: 0, x: 0, opacity: 0 }, 0);
  //

  //

  let tl2 = gsap.timeline();
  scrollTrigger.create({
    animation: tl2,
    trigger: ".scrollElement",
    start: "2000 top",
    end: "4000 100%",
    scrub: 1,
    markers: showMarker,
  });

  tl2.to(".cloud-1", { y: 0 * speed, x: 3 * speed, scale: 0.6 }, 0);
  tl2.to(".cloud-2", { y: 0 * speed, x: -3 * speed, scale: 0.6 }, 0);
  tl2.to([".red-light"], { y: 0, x: 0, opacity: 0 }, 0);
  tl2.to([".yellow-light"], { y: 0, x: 0, opacity: 1 }, 0);

  let tl3 = gsap.timeline();
  scrollTrigger.create({
    animation: tl3,
    trigger: ".scrollElement",
    start: "4000 top",
    end: "6000 100%",
    scrub: 1,
    markers: showMarker,
  });

  tl3.to(".cloud-1", { y: 0 * speed, x: 3 * speed, scale: 0.4, opacity: 0 }, 0);
  tl3.to(
    ".cloud-2",
    { y: 0 * speed, x: -3 * speed, scale: 0.4, opacity: 0 },
    0,
  );
  tl3.to([".yellow-light"], { y: 0, x: 0, opacity: 0 }, 0);
  tl3.to([".green-light"], { y: 0, x: 0, opacity: 1 }, 0);

  let tl4 = gsap.timeline();
  scrollTrigger.create({
    animation: tl4,
    trigger: ".scrollElement",
    start: "6000 top",
    end: "8000 100%",
    scrub: 1,
    markers: showMarker,
  });

  tl4.to([".traffic-light-area", ".f2e-info-area"], { opacity: 0 }, 0);

  let tl5 = gsap.timeline();
  scrollTrigger.create({
    animation: tl5,
    trigger: ".scrollElement",
    start: "8000 top",
    end: "10000 100%",
    scrub: 1,
    markers: showMarker,
  });

  tl5.to([".title-text", ".logo-text", ".start-bg"], { opacity: 0 }, 0);

  //
  const tl_2_1 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_2_1,
    trigger: ".scrollElement",
    start: `${10000} top`,
    end: `${10000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_2_1.from(".section2__title", { opacity: 0 }, 0);

  const tl_2_2 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_2_2,
    trigger: ".scrollElement",
    start: `${12000} top`,
    end: `${12000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  // 370px -> 225px
  tl_2_2.to(
    [".ch_f2e"],
    { scale: 225 / 370, transformOrigin: "bottom right" },
    0,
  );

  tl_2_2.to(
    [".ch_ui", ".road-bg"],
    { scale: 225 / 370, transformOrigin: "bottom" },
    0,
  );

  tl_2_2.to(
    [".ch_team"],
    { scale: 225 / 370, transformOrigin: "bottom left" },
    0,
  );
  // tl_2_2.addLabel("character_scale_down");

  const tl_2_3 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_2_3,
    trigger: ".scrollElement",
    start: `${14000} top`,
    end: `${14000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  // TODO: real scale ratio
  // TODO: delay 0.5s

  // tl_2_3.to(
  //   [".ch_ui", ".road-bg"],
  //   { scale: 225 / 370, transformOrigin: "bottom" },
  //   0,
  // );
  tl_2_3.from([".question_1"], { opacity: 0, left: 0 }, 0);

  const tl_2_4 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_2_4,
    trigger: ".scrollElement",
    start: `${15000} top`,
    end: `${15000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  // TODO: real scale ratio
  // TODO: delay 0.5s
  // tl_2_4.to(
  //   [".ch_team"],
  //   { scale: 225 / 370, transformOrigin: "bottom left" },
  //   0,
  // );

  // tl_2_4.delay(2);
  tl_2_4.from([".question_2"], { opacity: 0 }, 0);

  const tl_2_5 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_2_5,
    trigger: ".scrollElement",
    start: `${16000} top`,
    end: `${16000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_2_5.from([".question_3"], { opacity: 0, right: 0 }, 0);

  const tl_2_6 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_2_6,
    trigger: ".scrollElement",
    start: `${17000} top`,
    end: `${17000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_2_6.to([".cloud-3", ".cloud-4"], { scale: 0.2, opacity: 0 }, 0);
  tl_2_6.to(".section2__title", { opacity: 0 }, 0);

  tl_2_6.to([".ch_f2e"], { scale: 1, transformOrigin: "bottom right" }, 0);
  tl_2_6.to([".ch_ui", ".road-bg"], { scale: 1, transformOrigin: "bottom" }, 0);
  tl_2_6.to([".ch_team"], { scale: 1, transformOrigin: "bottom left" }, 0);
  tl_2_6.to([".question_1", ".question_2", ".question_3"], { opacity: 0 }, 0);

  const tl_3_1 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_3_1,
    trigger: ".scrollElement",
    start: `${19000} top`,
    end: `${19000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_3_1.from(".section3__title", { opacity: 0 }, 0);

  const tl_3_2 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_3_2,
    trigger: ".scrollElement",
    start: `${21000} top`,
    end: `${21000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_3_2.from(
    [".section3__btn_join_1", ".section3__btn_join_2", ".section3__btn_join_3"],
    { opacity: 0, y: 60 },
    0,
  );

  const tl_3_3 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_3_3,
    trigger: ".scrollElement",
    start: `${23000} top`,
    end: `${23000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_3_3.to(".section3__title", { opacity: 0 }, 0);

  tl_3_3.to(
    [".section3__btn_join_1", ".section3__btn_join_2", ".section3__btn_join_3"],
    { opacity: 0, y: 60 },
    0,
  );

  const tl_4_1 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_1,
    trigger: ".scrollElement",
    start: `${25000} top`,
    end: `${25000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });
  tl_4_1.from(".section4__title", { opacity: 0 }, 0);

  // 中間那隻 ch_ui 370 -> 120
  tl_4_1.to(
    [".ch_f2e"],
    { scale: 120 / 370, transformOrigin: "bottom right" },
    0,
  );

  tl_4_1.to(
    [".ch_ui", ".road-bg"],
    { scale: 120 / 370, transformOrigin: "bottom" },
    0,
  );

  tl_4_1.to(
    [".ch_team"],
    { scale: 120 / 370, transformOrigin: "bottom left" },
    0,
  );

  const tl_4_2 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_2,
    trigger: ".scrollElement",
    start: `${27000} top`,
    end: `${27000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_4_2.from([".section4__stage1"], { opacity: 0, y: 260 }, 0);

  const tl_4_3 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_3,
    trigger: ".scrollElement",
    start: `${28000} top`,
    end: `${28000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_4_3.to([".section4__stage1"], { opacity: 0.2, y: -240 }, 0);

  tl_4_3.from([".section4__stage2"], { opacity: 0, y: 260 }, 0);

  const tl_4_4 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_4,
    trigger: ".scrollElement",
    start: `${29000} top`,
    end: `${29000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_4_4.to([".section4__stage1"], { opacity: 0, y: -260 }, 0);
  tl_4_4.to([".section4__stage2"], { opacity: 0.2, y: -240 }, 0);

  tl_4_4.from([".section4__stage3"], { opacity: 0, y: 260 }, 0);

  const tl_4_5 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_5,
    trigger: ".scrollElement",
    start: `${30000} top`,
    end: `${30000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });
  tl_4_5.to([".section4__stage2"], { opacity: 0, y: -260 }, 0);
  tl_4_5.to([".section4__stage3"], { opacity: 0.2, y: -240 }, 0);

  const tl_4_6 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_6,
    trigger: ".scrollElement",
    start: `${31000} top`,
    end: `${31000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });
  tl_4_6.to([".section4__stage3"], { opacity: 0, y: -260 }, 0);

  const tl_4_7_1 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_7_1,
    trigger: ".scrollElement",
    start: `${32000} top`,
    end: `${32000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_4_7_1.to(".section4__title", { opacity: 0 }, 0);

  // 中間那隻 ch_ui 370 -> 220
  // TODO: 位置要在喬一下，喬到跑道上
  tl_4_7_1.to(
    [".ch_f2e"],
    { scale: 220 / 370, transformOrigin: "bottom right" },
    0,
  );
  tl_4_7_1.to([".ch_ui"], { scale: 220 / 370, transformOrigin: "bottom" }, 0);
  tl_4_7_1.to(
    [".ch_team"],
    { scale: 220 / 370, transformOrigin: "bottom left" },
    0,
  );
  tl_4_7_1.to(
    [".road-bg"],
    { scale: 1100 / 1175, transformOrigin: "bottom" },
    0,
  );

  const tl_4_7_2 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_7_2,
    trigger: ".scrollElement",
    start: `${33000} top`,
    end: `${33000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_4_7_2.to([".section5__dateline_block"], { right: "-100%" }, 0);
  tl_4_7_2.from([".section5__dateline"], { opacity: 0 }, 0);

  const tl_4_7_3 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_7_3,
    trigger: ".scrollElement",
    start: `${34000} top`,
    end: `${34000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_4_7_3.from([".section5__date_weekLine1"], { opacity: 0 }, 0);
  tl_4_7_3.from(
    [".section5__date_weekLine1-content"],
    { opacity: 0, y: 60 },
    0,
  );
  const tl_4_7_4 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_7_4,
    trigger: ".scrollElement",
    start: `${35000} top`,
    end: `${35000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_4_7_4.from([".section5__date_weekLine2"], { opacity: 0 }, 0);
  tl_4_7_4.from(
    [".section5__date_weekLine2-content"],
    { opacity: 0, y: 60 },
    0,
  );

  const tl_4_7_5 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_7_5,
    trigger: ".scrollElement",
    start: `${36000} top`,
    end: `${36000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });
  tl_4_7_5.from([".section5__date_weekLine3"], { opacity: 0 }, 0);
  tl_4_7_5.from(
    [".section5__date_weekLine3-content"],
    { opacity: 0, y: 60 },
    0,
  );

  const tl_4_7_6 = gsap.timeline();
  scrollTrigger.create({
    animation: tl_4_7_6,
    trigger: ".scrollElement",
    start: `${37000} top`,
    end: `${37000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  // tl_4_7_6.to(".section4__title", { opacity: 0 }, 0);
  tl_4_7_6.to(
    [
      ".section5__date_weekLine1",
      ".section5__date_weekLine1-content",
      ".section5__date_weekLine2",
      ".section5__date_weekLine2-content",
      ".section5__date_weekLine3",
      ".section5__date_weekLine3-content",
    ],
    { opacity: 0, y: -60 },
    0,
  );
  tl_4_7_6.to(".section5__dateline", { opacity: 0 }, 0);

  // 中間那隻 ch_ui 370 -> 220
  // TODO: 位置要在喬一下，喬到跑道上
  tl_4_7_6.to(
    [".ch_f2e"],
    { scale: 329 / 370, transformOrigin: "bottom right" },
    0,
  );
  tl_4_7_6.to([".ch_ui"], { scale: 329 / 370, transformOrigin: "bottom" }, 0);
  tl_4_7_6.to(
    [".ch_team"],
    { scale: 329 / 370, transformOrigin: "bottom left" },
    0,
  );
  tl_4_7_6.to(
    [".road-bg"],
    { scale: 1140 / 1175, transformOrigin: "bottom" },
    0,
  );

  tl_4_7_6.from([".section5__cloud-left"], { opacity: 0, x: -400, y: 100 }, 0);
  tl_4_7_6.from([".section5__cloud-right"], { opacity: 0, x: 400, y: 100 }, 0);
  tl_4_7_6.from([".section5__text2"], { opacity: 0, scale: 3 }, 0);

  const tl_5_1 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_5_1,
    trigger: ".scrollElement",
    start: `${38000} top`,
    end: `${38000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_5_1.to(
    [".section5__cloud-left"],
    { opacity: 0, x: 200, y: -60, scale: 0.2 },
    0,
  );
  tl_5_1.to(
    [".section5__cloud-right"],
    { opacity: 0, x: -200, y: -60, scale: 0.2 },
    0,
  );
  tl_5_1.to([".section5__text2"], { opacity: 0 }, 0);

  // 中間那隻 ch_ui 370 -> 182
  // TODO: 位置要在喬一下，喬到跑道上
  tl_5_1.to(
    [".ch_f2e"],
    { scale: 182 / 370, transformOrigin: "bottom right" },
    0,
  );
  tl_5_1.to([".ch_ui"], { scale: 182 / 370, transformOrigin: "bottom" }, 0);
  tl_5_1.to(
    [".ch_team"],
    { scale: 182 / 370, transformOrigin: "bottom left" },
    0,
  );
  tl_5_1.to([".road-bg"], { scale: 840 / 1175, transformOrigin: "bottom" }, 0);

  const tl_5_2 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_5_2,
    trigger: ".scrollElement",
    start: `${39000} top`,
    end: `${39000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_5_2.from([".section6__title"], { opacity: 0 }, 0);

  tl_5_2.from([".section6__award_light"], { rotate: 360 }, 0);
  tl_5_2.from(
    [".section6__award", ".section6__content"],
    { x: -180, opacity: 0 },
    0,
  );

  const tl_5_3 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_5_3,
    trigger: ".scrollElement",
    start: `${40000} top`,
    end: `${40000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_5_3.to([".section6__title"], { opacity: 0 }, 0);
  tl_5_3.to([".section6__award_light"], { rotate: -360 }, 0);
  tl_5_3.to(
    [".section6__award", ".section6__content"],
    { x: 180, opacity: 0 },
    0,
  );

  const tl_7_1 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_7_1,
    trigger: ".scrollElement",
    start: `${41000} top`,
    end: `${41000 + 1000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_7_1.from([".section7__title"], { opacity: 0 }, 0);
  tl_7_1.from([".section7__tree-left"], { opacity: 0, x: -400, y: 100 }, 0);
  tl_7_1.from([".section7__tree-right"], { opacity: 0, x: 400, y: 100 }, 0);

  // TODO: 少一個數的偏移 timeline
  tl_7_1.from([".section7__logo-wrap-1"], { opacity: 0, y: 100 });
  tl_7_1.from([".section7__logo-wrap-2"], { opacity: 0, y: 200 }).delay(1);
  tl_7_1.from([".section7__logo-wrap-3"], { opacity: 0, y: 300 }).delay(2);

  const tl_7_2 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_7_2,
    trigger: ".scrollElement",
    start: `${42000} top`,
    end: `${42000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_7_2.to([".section7__title"], { opacity: 0 }, 0);
  tl_7_2.to(
    [
      ".section7__logo-wrap-1",
      ".section7__logo-wrap-2",
      ".section7__logo-wrap-3",
    ],
    { opacity: 0, y: 40 },
    0,
  );

  tl_7_2.to(
    [".section7__tree-left"],
    {
      scale: 0.2,
      opacity: 0,
      x: "+=460",
      y: "-=6",
    },
    0,
  );

  tl_7_2.to(
    [".section7__tree-right"],
    {
      scale: 0.2,
      opacity: 0,
      x: "-=460",
      y: "-=6",
    },
    0,
  );

  tl_7_2.from(
    [".section7__cloud-left"],
    {
      x: "-=460",
      y: "+=600",
      opacity: 0,
    },
    0,
  );

  tl_7_2.from(
    [".section7__cloud-right"],
    {
      x: "+=460",
      y: "+=600",
      opacity: 0,
    },
    0,
  );

  const tl_7_3 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_7_3,
    trigger: ".scrollElement",
    start: `${44000} top`,
    end: `${44000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });
  tl_7_3.to(
    [".section7__cloud-left"],
    {
      x: "+=360",
      y: "-=60",
      opacity: 0.2,
      scale: 0.4,
    },
    0,
  );

  tl_7_3.to(
    [".section7__cloud-right"],
    {
      x: "-=360",
      y: "-=60",
      opacity: 0,
      scale: 0.4,
    },
    0,
  );

  // 中間那隻 ch_ui 370 -> 220
  // TODO: 位置要在喬一下，喬到跑道上
  tl_7_3.to(
    [".ch_f2e"],
    { scale: 339 / 370, transformOrigin: "bottom right" },
    0,
  );
  tl_7_3.to([".ch_ui"], { scale: 339 / 370, transformOrigin: "bottom" }, 0);
  tl_7_3.to(
    [".ch_team"],
    { scale: 339 / 370, transformOrigin: "bottom left" },
    0,
  );
  tl_7_3.to([".road-bg"], { scale: 1, transformOrigin: "bottom" }, 0);

  tl_7_3.from([".section7__finish"], { opacity: 0 }, 0);
  tl_7_3.from(
    [".section7__finishLine_l", ".section7__finishLine_r"],
    { scale: 1.2, y: "+=400" },
    0,
  );

  const tl_7_4 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_7_4,
    trigger: ".scrollElement",
    start: `${46000} top`,
    end: `${46000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_7_4.to([".section7__finishLine_l"], { rotate: -5, x: -20, y: 40 }, 0);
  tl_7_4.to([".section7__finishLine_r"], { rotate: 5, x: 20, y: 40 }, 0);

  // 中間那隻 ch_ui 370 -> 220
  // TODO: 位置要在喬一下，喬到跑道上
  tl_7_4.to([".ch_f2e"], { scale: 1, transformOrigin: "bottom right" }, 0);
  tl_7_4.to([".ch_ui"], { scale: 1, transformOrigin: "bottom" }, 0);
  tl_7_4.to([".ch_team"], { scale: 1, transformOrigin: "bottom left" }, 0);
  // tl_7_4.to([".road-bg"], { scale: 1, transformOrigin: "bottom" }, 0);

  const tl_7_5 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_7_5,
    trigger: ".scrollElement",
    start: `${48000} top`,
    end: `${48000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_7_5.to([".section7__finishLine_l"], { opacity: 0, x: -400, y: 40 }, 0);
  tl_7_5.to([".section7__finishLine_r"], { opacity: 0, x: 400, y: 40 }, 0);
  tl_7_5.to([".ch_f2e"], { scale: 1.3, transformOrigin: "bottom right" }, 0);
  tl_7_5.to([".ch_ui"], { scale: 1.3, transformOrigin: "bottom" }, 0);
  tl_7_5.to([".ch_team"], { scale: 1.3, transformOrigin: "bottom left" }, 0);

  const tl_7_6 = gsap.timeline();

  scrollTrigger.create({
    animation: tl_7_6,
    trigger: ".scrollElement",
    start: `${50000} top`,
    end: `${50000 + 2000} 100%`,
    scrub: 1,
    markers: showMarker,
  });

  tl_7_6.to(
    [".ch_f2e"],
    { opacity: 0, scale: 1.7, transformOrigin: "bottom right" },
    0,
  );
  tl_7_6.to(
    [".ch_ui"],
    { opacity: 0, scale: 1.7, transformOrigin: "bottom" },
    0,
  );
  tl_7_6
    .to(
      [".ch_team"],
      { opacity: 0, scale: 1.7, transformOrigin: "bottom left" },
      0,
    )
    .delay(1);

  tl_7_6.to([".section7__finish"], { opacity: 0 }, 0.5);
  tl_7_6.from([".section7__logo", ".section7__join"], { opacity: 0 }, 2);
});
</script>

<style lang="scss">
@use "sass:math";
@function relative-height-percent($value) {
  @return math.div($value, 1080px) * 100%;
}

@function relative-width-percent($value) {
  @return math.div($value, 1920px) * 100%;
}

@function relative-light-height-percent($value) {
  @return math.div($value, 108px) * 100%;
}

@function relative-light-width-percent($value) {
  @return math.div($value, 275px) * 100%;
}

@mixin tlwh($top, $left, $width, $height) {
  position: absolute;
  top: relative-height-percent($top);
  left: relative-width-percent($left);
  width: relative-width-percent($width);
  height: relative-height-percent($height);
}

@mixin trwh($top, $right, $width, $height) {
  position: absolute;
  top: relative-height-percent($top);
  right: relative-width-percent($right);
  width: relative-width-percent($width);
  height: relative-height-percent($height);
}

@mixin blwh($bottom, $left, $width, $height) {
  position: absolute;
  bottom: relative-height-percent($bottom);
  left: relative-width-percent($left);
  width: relative-width-percent($width);
  height: relative-height-percent($height);
}

body {
  // height: 2000px;
}

.app-screen {
  position: fixed;
  // height: 2000px;
  // // position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  // overflow-y: auto;
}
.logo-text {
  position: absolute;
  top: relative-height-percent(44px);
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  width: relative-width-percent(680px);
}

.start-bg {
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  transform: translateX(-50%);
  width: relative-width-percent(1430px);
  height: 100%;
  z-index: 5;
}

.road-bg {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 0;
  width: relative-width-percent(1175px);
}

.cloud-1 {
  position: absolute;
  top: relative-height-percent(423px);
  left: relative-width-percent(142px);
  width: relative-width-percent(430px);
  z-index: 10;
}

.cloud-2 {
  position: absolute;
  right: 0;
  top: relative-height-percent(455px);
  right: relative-width-percent(91px);
  width: relative-width-percent(485px);
  z-index: 10;
}

// gif

.ch_f2e {
  position: absolute;
  bottom: relative-height-percent(16px);
  left: relative-width-percent(449px);
  width: relative-width-percent(351px);
  z-index: 10;
}

.ch_ui {
  position: absolute;
  bottom: relative-height-percent(27.5px);
  left: relative-width-percent(776px);
  width: relative-width-percent(370px);
  z-index: 10;
}

.ch_team {
  position: absolute;
  bottom: relative-height-percent(9px);
  right: relative-width-percent(439px);
  width: relative-width-percent(351px);
  z-index: 10;
}

.btn-join-area {
  position: absolute;
  bottom: relative-height-percent(20px);
  right: relative-width-percent(20px);
  text-align: center;
  width: relative-width-percent(103px);

  .btn_joinHand {
    position: relative;
    left: 50%;
    transform: translateX(-50%);
    // width: 57px;
  }
  .btn_join {
    // width: 103px;
  }
}

.f2e-info-area {
  display: flex;
  justify-content: space-around;
  max-width: 1196px;
  width: 100%;
  position: absolute;
  top: relative-height-percent(371px);
  left: relative-width-percent(362px);
}

.traffic-light-area {
  position: absolute;
  right: 0;
  top: relative-height-percent(463px);
  width: relative-width-percent(275px);
  // TODO: fix position
  z-index: 10;
}

.light-wrap {
  position: relative;
  width: 275px;
  height: 100%;
  width: 100%;
  height: relative-height-percent(108px);

  .ready_frame {
    position: absolute;
    z-index: 1;
    width: 100%;
    height: auto;
  }

  .green-light,
  .yellow-light,
  .red-light {
    position: absolute;
    width: relative-light-width-percent(49px);
    top: relative-light-height-percent(29px);
  }

  .red-light {
    left: relative-light-width-percent(32px);
  }
  .yellow-light {
    left: relative-light-width-percent(97px);
  }
  .green-light {
    left: relative-light-width-percent(162px);
  }
}

.title-text {
  position: absolute;
  top: relative-height-percent(268px);
  left: 50%;
  transform: translateX(-50%);
}

.f2e-area {
  text-align: center;
  // flex-shrink: 1;
}

.map {
  position: absolute;
  bottom: relative-height-percent(20px);
  left: relative-width-percent(30px);
  width: relative-width-percent(260px);
}

.section-title {
  position: absolute;
  top: relative-height-percent(40px);
  left: 50%;
  transform: translateX(-50%);
}

// TODO: 位置大小要再調整

.cloud-3 {
  position: absolute;
  top: relative-height-percent(954px);
  left: relative-width-percent(413px);
  width: relative-width-percent(150px);
  height: relative-height-percent(134.48px);
  transform: rotateY(180deg);
}

.cloud-4 {
  position: absolute;
  top: relative-height-percent(954px);
  right: relative-width-percent(413px);
  width: relative-width-percent(150px);
  height: relative-height-percent(134.48px);
}

.question_1 {
  @include tlwh(308px, 240px, 466.67px, 412px);
  z-index: 10;
}

.question_2 {
  @include tlwh(308px, 726.67px, 466.67px, 412px);
  z-index: 10;
}

.question_3 {
  @include trwh(308px, 240px, 466.67px, 412px);
  z-index: 10;
}

.section3 {
  &__btn_join_1 {
    @include blwh(595px, 362px, 358.67px, 196px);
    img {
      width: calc(103px / 358.67px) * 100%;
    }
  }
  &__btn_join_2 {
    @include blwh(595px, 780.67px, 358.67px, 196px);
    img {
      width: calc(103px / 358.67px) * 100%;
    }
  }
  &__btn_join_3 {
    @include blwh(595px, 1199.33px, 358.67px, 196px);
    img {
      width: calc(103px / 358.67px) * 100%;
    }
  }
}

.section4 {
  &__stage1 {
    // TODO: fix  top 目前 top 是抓大概不精準
    @include tlwh(342px, 359px, 871px, 253px);
    z-index: 6;
    // TODO: fix  max-width
    img {
      max-width: 280px;
    }
  }

  &__stage2 {
    @include tlwh(342px, 874px, 806px, 240px);
    z-index: 6;
    // TODO: fix  max-width
    img {
      max-width: 280px;
    }
  }

  &__stage3 {
    @include tlwh(342px, 359px, 871px, 253px);
    z-index: 6;
    // TODO: fix  max-width
    img {
      max-width: 280px;
    }
  }
}

.section5__dateline-wrap {
  overflow: hidden;
  position: absolute;
  height: 103px;
  width: 100%;
  top: relative-height-percent(548px);
}
.section5 {
  &__dateline {
    position: absolute;
    left: 240px;
    right: 240px;
    height: 103px;
    // top: relative-height-percent(548px);
    // right: 240px;
    width: calc(1920px - 480px);

    z-index: 3;
    // width: 100%;
    // @include tlwh(548px, 240px, 1920px - 480px, auto);

    // @include tlwh(548px, 240px, 1920px - 480px, 253px);
  }

  // trick
  &__dateline_block {
    position: absolute;
    height: 103px;
    width: 100%;
    z-index: 4;
    // background-color: aqua;
    @apply bg-secondary;
  }

  &__date_weekLine1 {
    position: absolute;
    top: relative-height-percent(472px);
    height: relative-height-percent(140px);
    left: relative-width-percent(435.5px);
  }

  &__date_weekLine2 {
    position: absolute;
    top: relative-height-percent(426px);
    height: relative-height-percent(140px);
    left: relative-width-percent(936px);
  }

  &__date_weekLine3 {
    position: absolute;
    top: relative-height-percent(472px);
    height: relative-height-percent(140px);
    left: relative-width-percent(1444.5px);
  }

  &__date_weekLine1-content {
    position: absolute;
    top: relative-height-percent(80px);
    height: relative-height-percent(392px);
    left: relative-width-percent(300px);
  }
  &__date_weekLine2-content {
    position: absolute;
    top: relative-height-percent(80px);
    height: relative-height-percent(392px);
    left: relative-width-percent(786.5px);
  }

  &__date_weekLine3-content {
    position: absolute;
    top: relative-height-percent(80px);
    height: relative-height-percent(392px);
    left: relative-width-percent(1301.5px);
  }

  &__cloud-left {
    @include tlwh(396px, 206px, 368px, 178px);
  }
  &__cloud-right {
    @include trwh(292px, 114px, 450px, 333.5px);
  }

  &__text2 {
    position: absolute;
    top: relative-height-percent(232px);
    // @include trwh(292px, 114px, 450px, 333.5px);
  }
}

.section6 {
  &__content {
    @include tlwh(251px, 795px, 765px, 360px);
  }
  &__award {
    @include tlwh(251px, 360px, 375px, 375px);
  }

  &__award_light {
    position: absolute;
  }
  &__award_trophy {
    position: absolute;
  }
}
.section7 {
  &__tree-left {
    @include tlwh(540px, 300px, 351px, 548px);
    transform: rotateY(180deg);
  }
  &__tree-right {
    @include trwh(566px, 342px, 351px, 548px);
  }

  &__logo-wrap-1 {
    @include tlwh(244px, 362px, 315px, 369px);
    img {
      width: 100%;
    }
  }
  &__logo-wrap-2 {
    @include tlwh(244px, 802px, 315px, 369px);
    img {
      width: 100%;
    }
  }
  &__logo-wrap-3 {
    @include tlwh(244px, 1243px, 315px, 369px);
    img {
      width: 100%;
    }
  }

  &__cloud-left {
    @include tlwh(423px, 142px, 430px, 280px);
    z-index: 10;
  }

  &__cloud-right {
    @include trwh(455px, 91px, 485px, 255px);
    z-index: 10;
  }

  &__finish {
    @include tlwh(0px, 245px, 1430px, 1080px);
  }

  &__finishLine_l {
    // 1920/ 2
    @include tlwh(731px, 15px, 960px, 129.5px);
    z-index: 10;
  }
  &__finishLine_r {
    @include trwh(731px, 15px, 960px, 129.5px);
    z-index: 10;
  }

  &__logo {
    @include tlwh(124px, 700px, 520px, 387.15px);
    z-index: 10;
  }

  &__join {
    @include tlwh(540px, 836px, 249px, 304.71px);
  }
}

.scrollElement {
  position: absolute;
  height: 60000px;
  width: 100px;
  top: 0;
  z-index: 0;
}
</style>
